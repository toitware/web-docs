---
order: 0
---

# Provision your hardware

The provision command will create a new hardware identity. Use the provision command only once per hardware device. 

For a start, you can provision up to 10 new hardware IDs with the free version of Toit, and later, if you have many hardware devices, 
you can request more hardware IDs in the [Toit console](https://console.toit.io/organization/details).

You need the Toit CLI to complete the provisioning steps below. If you haven't installed Toit on your computer yet, follow the steps described [here](../../installation/toitcli).

## Provision with CLI

Follow the steps to initially provision your device:

1. Connect the ESP32 with a USB cable to your computer where the Toit CLI is installed.

<Note type="warning" title="Update drivers!">

If you are using macOS or Windows, you might need to update the drivers from
[here](https://ftdichip.com/drivers/vcp-drivers/) and 
[here](https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers). 
Install both drivers, reboot your computer and try to run the Toit CLI serial commands again.

</Note>

2. Use the Toit CLI to provision your ESP32 with initial device settings and the latest released Toit firmware.
Replace `<SSID>` and `<password>` with your own WiFi credentials (without quotes) in the following command:

```txt
toit serial provision -p wifi.ssid=<SSID> -p wifi.password=<password>
```
For example:
```shell
toit serial provision -p wifi.ssid=xyz -p wifi.password="my pw"
```

  The WiFi settings for your ESP32 can be changed later on.

3. The provision process might take up to 5 minutes. When finished, it will output: `device was successfully flashed`.

4. The ESP32 is now ready to be [claimed](../claim) in the Toit console.

<Note title="Troubleshooting">

If you have trouble connecting your ESP32 via a serial port to your computer, please visit the section about 
[serial port troubleshooting](../serialport) for help.
Some hardware models need physical interaction with the device during flashing (like pushing a button). If flashing doesn't work, consult the documentation for your device.

</Note>

## Device models

The `provision` command sets the model on the device. The default model is `esp32-4mb`.

If you want to use another device model, you can provide it with `-m` in the provision command:

```shell
toit serial provision -m <model> -p wifi.ssid=<SSID> -p wifi.password=<WiFi-password>
```

Look for available device models for each firmware version available in the
[Toit console](https://console.toit.io/organization/firmware).

<Note title="Problems with provision">
    
If the initial device provision fails during the provisioning steps, the hardware ID (if any) is written to the local disk if possible and will be reused the next time the command is executed on the same computer.

Also, if the provision command fails, consider trying with a lower baud rate (here half the default baud rate):

```shell
toit serial provision --baud 460800 -p wifi.ssid=<SSID> -p wifi.password=<WiFi-password>
```
</Note>    
