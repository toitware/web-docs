---
order: 1
---

# Apps, communicate through the cloud

[PubSub](../infrastructure/pubsub.md) is a service for bi-directional communication. In this tutorial, we show how two apps can communicate with each other through the cloud. Communicating through the cloud allows apps installed on different devices to communicate with each other. Note that in this scenario, the process is contingent on the Max Offline set for the device(s) involved.

## The subscriber

This time, we build the subscriber as an app. The specification file subscribes to the cloud topic. A new message in this topic is used as trigger for starting the Toit program that then consumes the message, meaning that the message has been acknowledged and removed from the topic. This process ensures that a message cannot trigger the app more than once.

<div class="toit">
```
// filename: pubsub/subscribe_cloud.toit
{include-file 3- third_party/toit/examples/PubSub/subscribe_cloud.toit}
```
</div>

```yaml
# filename: pubsub/subscribe_cloud.yaml
{include-file 3- third_party/toit/examples/PubSub/subscribe_cloud.yaml}
```

Deploy the subscriber app using the CLI with

```bash
toit deploy subscribe_cloud.yaml
```

## The publisher

Then run the publisher program - either from the same device, or from another device/simulator - by pasting the following program in the Code tab of the chosen device:

<div class="toit">
```
// filename: pubsub/publish_cloud.toit
{include-file 3- third_party/toit/examples/PubSub/publish_cloud.toit}
```
</div>

You can also send a message directly from the CLI with

```bash
toit pubsub write cloud:hello-world "Mr. CLI" -- Hello from the CLI
```

You can now go the Toit console, and choose the device on which the subscriber app was installed to check on the LOGS tab that the message has been received.

![hellofromcli](../img/hellofromcli.png)
