---
order: 0
---

# APIs

## GRPC API

The Toit console provides a publicly available [gRPC API](https://github.com/toitware/api) with API packages and examples for Java, Python, Dart, C# and NodeJS, allowing a client application to do all public operations on the Toit console.

The service is available on: `https://api.toit.io`.

The API is guarded so all requests should be authorized with `Authorization: Bearer access-token`.
with the `access-token` available using the [toit.api.Auth service](https://github.com/toitware/api/blob/master/proto/toit/api/auth.proto).

## API keys

Create an API key to be used when connecting server applications to the API.

<Tabs>
<Tab label="Console">

Navigate to the [API keys section](https://console.toit.io/project/apikeys) in the Toit console and press the **Create API key** button.

</Tab>
<Tab label="CLI">

Use the Toit CLI to execute the command:

```shell
toit project api-keys add <name>
```

</Tab>
</Tabs>

Then, view (and copy) the API key **secret**.

<Tabs>
<Tab label="Console">

Navigate to the [API keys section](https://console.toit.io/project/apikeys) in the Toit console and view the API key secret by clicking the key icon.

</Tab>
<Tab label="CLI">

Use the CLI command (replace `api-key-ID` with the unique ID of the API key) to view the secret:

```shell
toit project api-keys print-secret api-key-ID
```

You can view the list of all existing API Keys in your Toit project with the command:

```shell
toit project api-keys list
```

</Tab>
</Tabs>

The API key **secret** must be used when creating the connection - in your server application -
to the Toit Cloud. See examples of how to create the connection using the API key secret in the [demo repository](https://github.com/toitware/demos/tree/master/api), where
we provide examples of API usage in four different programming languages: NodeJS, Java, Go, and Python.

## Data API

The Toit console provides a [data ingestion API](https://github.com/toitware/api/blob/master/proto/toit/api/data.proto).
The type of data to be ingested is grouped into two groups:

- **Metrics** - measurement at a point in time for the system generated by the `metrics` library.
- **Logs** - system generated set of data that describe an event generated by the `logs` library.

<Note type="warning">

For application data, use the bi-directional
[PubSub API](../pubsub).

</Note>

Metrics and logs are collected on the device by the system process from your application code and sent to the Toit cloud,
where it will be grouped and available for ingestion.

## Data subscriptions

Data in the Toit console is grouped into the types: Metrics and Logs.
For each type, a Toit project can have multiple subscriptions.
A subscription is simply a cursor managed by the Toit console on which messages the subscriber has read.
Every time a message has been read it needs to be acknowledged by the subscriber in order to move the subscription cursor forward, permanently.
Each message must be acknowledged before the acknowledge deadline (10 minutes by default), otherwise it will be enqueued again.

<Note type="warning">

If a subscription is more than 7 days behind, messages will be pruned and missed by the subscriber.

</Note>

It is possible to do concurrent reads on one subscription.
When doing so, the concurrent reads will receive different batches of the same data set, making it easier to make ingestion concurrent.

### Create a subscription for logs or metrics

<Tabs>
<Tab label="Console">

Go to the [Data](https://console.toit.io/data) section in the Toit console, choose either the Logs or Metrics tabs, click on **Create Subscription**, and add a name to the subscription to create.

Use the CLI commands to acknowledge messages for a subscription.

</Tab>

<Tab label="CLI">
Create a subscription with

```shell
toit data subscription create <data type> <name>
```

For example, to create a data subscription on the data type `metrics` with subscription name `temperature`, use

```shell
toit data subscription create metrics temperature
```

To read a subscription, use

```shell
toit data read <data type> <name>
```

For example, reading data of the data type `metrics` from a subscription named `temperature`, use

```shell
toit data read metrics temperature
```

To acknowledge unacked messages, add the `--auto-ack` flag.

For example, to read data of the data type `metrics` from a subscription named `temperature` with acknowledging messages and start making progress on the subscription, use

```shell
toit data read metrics temperature --auto-ack
```

</Tab>
</Tabs>
