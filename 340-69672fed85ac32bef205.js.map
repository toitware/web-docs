{"version":3,"file":"340-69672fed85ac32bef205.js","mappings":"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","sources":["webpack://web-docs/./node_modules/codemirror/addon/search/search.js"],"sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n// Define search commands. Depends on dialog.js or another\n// implementation of the openDialog method.\n// Replace works a little oddly -- it will do the replace on the next\n// Ctrl-G (or whatever is bound to findNext) press. You prevent a\n// replace by making sure the match is no longer selected when hitting\n// Ctrl-G.\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./searchcursor\"), require(\"../dialog/dialog\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./searchcursor\", \"../dialog/dialog\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\"; // default search panel location\n\n  CodeMirror.defineOption(\"search\", {\n    bottom: false\n  });\n\n  function searchOverlay(query, caseInsensitive) {\n    if (typeof query == \"string\") query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\"), caseInsensitive ? \"gi\" : \"g\");else if (!query.global) query = new RegExp(query.source, query.ignoreCase ? \"gi\" : \"g\");\n    return {\n      token: function (stream) {\n        query.lastIndex = stream.pos;\n        var match = query.exec(stream.string);\n\n        if (match && match.index == stream.pos) {\n          stream.pos += match[0].length || 1;\n          return \"searching\";\n        } else if (match) {\n          stream.pos = match.index;\n        } else {\n          stream.skipToEnd();\n        }\n      }\n    };\n  }\n\n  function SearchState() {\n    this.posFrom = this.posTo = this.lastQuery = this.query = null;\n    this.overlay = null;\n  }\n\n  function getSearchState(cm) {\n    return cm.state.search || (cm.state.search = new SearchState());\n  }\n\n  function queryCaseInsensitive(query) {\n    return typeof query == \"string\" && query == query.toLowerCase();\n  }\n\n  function getSearchCursor(cm, query, pos) {\n    // Heuristic: if the query string is all lowercase, do a case insensitive search.\n    return cm.getSearchCursor(query, pos, {\n      caseFold: queryCaseInsensitive(query),\n      multiline: true\n    });\n  }\n\n  function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {\n    cm.openDialog(text, onEnter, {\n      value: deflt,\n      selectValueOnOpen: true,\n      closeOnEnter: false,\n      onClose: function () {\n        clearSearch(cm);\n      },\n      onKeyDown: onKeyDown,\n      bottom: cm.options.search.bottom\n    });\n  }\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) cm.openDialog(text, f, {\n      value: deflt,\n      selectValueOnOpen: true,\n      bottom: cm.options.search.bottom\n    });else f(prompt(shortText, deflt));\n  }\n\n  function confirmDialog(cm, text, shortText, fs) {\n    if (cm.openConfirm) cm.openConfirm(text, fs);else if (confirm(shortText)) fs[0]();\n  }\n\n  function parseString(string) {\n    return string.replace(/\\\\([nrt\\\\])/g, function (match, ch) {\n      if (ch == \"n\") return \"\\n\";\n      if (ch == \"r\") return \"\\r\";\n      if (ch == \"t\") return \"\\t\";\n      if (ch == \"\\\\\") return \"\\\\\";\n      return match;\n    });\n  }\n\n  function parseQuery(query) {\n    var isRE = query.match(/^\\/(.*)\\/([a-z]*)$/);\n\n    if (isRE) {\n      try {\n        query = new RegExp(isRE[1], isRE[2].indexOf(\"i\") == -1 ? \"\" : \"i\");\n      } catch (e) {} // Not a regular expression after all, do a string search\n\n    } else {\n      query = parseString(query);\n    }\n\n    if (typeof query == \"string\" ? query == \"\" : query.test(\"\")) query = /x^/;\n    return query;\n  }\n\n  function startSearch(cm, state, query) {\n    state.queryText = query;\n    state.query = parseQuery(query);\n    cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));\n    state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));\n    cm.addOverlay(state.overlay);\n\n    if (cm.showMatchesOnScrollbar) {\n      if (state.annotate) {\n        state.annotate.clear();\n        state.annotate = null;\n      }\n\n      state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));\n    }\n  }\n\n  function doSearch(cm, rev, persistent, immediate) {\n    var state = getSearchState(cm);\n    if (state.query) return findNext(cm, rev);\n    var q = cm.getSelection() || state.lastQuery;\n    if (q instanceof RegExp && q.source == \"x^\") q = null;\n\n    if (persistent && cm.openDialog) {\n      var hiding = null;\n\n      var searchNext = function (query, event) {\n        CodeMirror.e_stop(event);\n        if (!query) return;\n\n        if (query != state.queryText) {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n        }\n\n        if (hiding) hiding.style.opacity = 1;\n        findNext(cm, event.shiftKey, function (_, to) {\n          var dialog;\n          if (to.line < 3 && document.querySelector && (dialog = cm.display.wrapper.querySelector(\".CodeMirror-dialog\")) && dialog.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, \"window\").top) (hiding = dialog).style.opacity = .4;\n        });\n      };\n\n      persistentDialog(cm, getQueryDialog(cm), q, searchNext, function (event, query) {\n        var keyName = CodeMirror.keyName(event);\n        var extra = cm.getOption('extraKeys'),\n            cmd = extra && extra[keyName] || CodeMirror.keyMap[cm.getOption(\"keyMap\")][keyName];\n\n        if (cmd == \"findNext\" || cmd == \"findPrev\" || cmd == \"findPersistentNext\" || cmd == \"findPersistentPrev\") {\n          CodeMirror.e_stop(event);\n          startSearch(cm, getSearchState(cm), query);\n          cm.execCommand(cmd);\n        } else if (cmd == \"find\" || cmd == \"findPersistent\") {\n          CodeMirror.e_stop(event);\n          searchNext(query, event);\n        }\n      });\n\n      if (immediate && q) {\n        startSearch(cm, state, q);\n        findNext(cm, rev);\n      }\n    } else {\n      dialog(cm, getQueryDialog(cm), \"Search for:\", q, function (query) {\n        if (query && !state.query) cm.operation(function () {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n          findNext(cm, rev);\n        });\n      });\n    }\n  }\n\n  function findNext(cm, rev, callback) {\n    cm.operation(function () {\n      var state = getSearchState(cm);\n      var cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);\n\n      if (!cursor.find(rev)) {\n        cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm.firstLine(), 0));\n        if (!cursor.find(rev)) return;\n      }\n\n      cm.setSelection(cursor.from(), cursor.to());\n      cm.scrollIntoView({\n        from: cursor.from(),\n        to: cursor.to()\n      }, 20);\n      state.posFrom = cursor.from();\n      state.posTo = cursor.to();\n      if (callback) callback(cursor.from(), cursor.to());\n    });\n  }\n\n  function clearSearch(cm) {\n    cm.operation(function () {\n      var state = getSearchState(cm);\n      state.lastQuery = state.query;\n      if (!state.query) return;\n      state.query = state.queryText = null;\n      cm.removeOverlay(state.overlay);\n\n      if (state.annotate) {\n        state.annotate.clear();\n        state.annotate = null;\n      }\n    });\n  }\n\n  function el(tag, attrs) {\n    var element = tag ? document.createElement(tag) : document.createDocumentFragment();\n\n    for (var key in attrs) {\n      element[key] = attrs[key];\n    }\n\n    for (var i = 2; i < arguments.length; i++) {\n      var child = arguments[i];\n      element.appendChild(typeof child == \"string\" ? document.createTextNode(child) : child);\n    }\n\n    return element;\n  }\n\n  function getQueryDialog(cm) {\n    var label = el(\"label\", {\n      className: \"CodeMirror-search-label\"\n    }, cm.phrase(\"Search:\"), el(\"input\", {\n      type: \"text\",\n      \"style\": \"width: 10em\",\n      className: \"CodeMirror-search-field\",\n      id: \"CodeMirror-search-field\"\n    }));\n    label.setAttribute(\"for\", \"CodeMirror-search-field\");\n    return el(\"\", null, label, \" \", el(\"span\", {\n      style: \"color: #666\",\n      className: \"CodeMirror-search-hint\"\n    }, cm.phrase(\"(Use /re/ syntax for regexp search)\")));\n  }\n\n  function getReplaceQueryDialog(cm) {\n    return el(\"\", null, \" \", el(\"input\", {\n      type: \"text\",\n      \"style\": \"width: 10em\",\n      className: \"CodeMirror-search-field\"\n    }), \" \", el(\"span\", {\n      style: \"color: #666\",\n      className: \"CodeMirror-search-hint\"\n    }, cm.phrase(\"(Use /re/ syntax for regexp search)\")));\n  }\n\n  function getReplacementQueryDialog(cm) {\n    return el(\"\", null, el(\"span\", {\n      className: \"CodeMirror-search-label\"\n    }, cm.phrase(\"With:\")), \" \", el(\"input\", {\n      type: \"text\",\n      \"style\": \"width: 10em\",\n      className: \"CodeMirror-search-field\"\n    }));\n  }\n\n  function getDoReplaceConfirm(cm) {\n    return el(\"\", null, el(\"span\", {\n      className: \"CodeMirror-search-label\"\n    }, cm.phrase(\"Replace?\")), \" \", el(\"button\", {}, cm.phrase(\"Yes\")), \" \", el(\"button\", {}, cm.phrase(\"No\")), \" \", el(\"button\", {}, cm.phrase(\"All\")), \" \", el(\"button\", {}, cm.phrase(\"Stop\")));\n  }\n\n  function replaceAll(cm, query, text) {\n    cm.operation(function () {\n      for (var cursor = getSearchCursor(cm, query); cursor.findNext();) {\n        if (typeof query != \"string\") {\n          var match = cm.getRange(cursor.from(), cursor.to()).match(query);\n          cursor.replace(text.replace(/\\$(\\d)/g, function (_, i) {\n            return match[i];\n          }));\n        } else cursor.replace(text);\n      }\n    });\n  }\n\n  function replace(cm, all) {\n    if (cm.getOption(\"readOnly\")) return;\n    var query = cm.getSelection() || getSearchState(cm).lastQuery;\n    var dialogText = all ? cm.phrase(\"Replace all:\") : cm.phrase(\"Replace:\");\n    var fragment = el(\"\", null, el(\"span\", {\n      className: \"CodeMirror-search-label\"\n    }, dialogText), getReplaceQueryDialog(cm));\n    dialog(cm, fragment, dialogText, query, function (query) {\n      if (!query) return;\n      query = parseQuery(query);\n      dialog(cm, getReplacementQueryDialog(cm), cm.phrase(\"Replace with:\"), \"\", function (text) {\n        text = parseString(text);\n\n        if (all) {\n          replaceAll(cm, query, text);\n        } else {\n          clearSearch(cm);\n          var cursor = getSearchCursor(cm, query, cm.getCursor(\"from\"));\n\n          var advance = function () {\n            var start = cursor.from(),\n                match;\n\n            if (!(match = cursor.findNext())) {\n              cursor = getSearchCursor(cm, query);\n              if (!(match = cursor.findNext()) || start && cursor.from().line == start.line && cursor.from().ch == start.ch) return;\n            }\n\n            cm.setSelection(cursor.from(), cursor.to());\n            cm.scrollIntoView({\n              from: cursor.from(),\n              to: cursor.to()\n            });\n            confirmDialog(cm, getDoReplaceConfirm(cm), cm.phrase(\"Replace?\"), [function () {\n              doReplace(match);\n            }, advance, function () {\n              replaceAll(cm, query, text);\n            }]);\n          };\n\n          var doReplace = function (match) {\n            cursor.replace(typeof query == \"string\" ? text : text.replace(/\\$(\\d)/g, function (_, i) {\n              return match[i];\n            }));\n            advance();\n          };\n\n          advance();\n        }\n      });\n    });\n  }\n\n  CodeMirror.commands.find = function (cm) {\n    clearSearch(cm);\n    doSearch(cm);\n  };\n\n  CodeMirror.commands.findPersistent = function (cm) {\n    clearSearch(cm);\n    doSearch(cm, false, true);\n  };\n\n  CodeMirror.commands.findPersistentNext = function (cm) {\n    doSearch(cm, false, true, true);\n  };\n\n  CodeMirror.commands.findPersistentPrev = function (cm) {\n    doSearch(cm, true, true, true);\n  };\n\n  CodeMirror.commands.findNext = doSearch;\n\n  CodeMirror.commands.findPrev = function (cm) {\n    doSearch(cm, true);\n  };\n\n  CodeMirror.commands.clearSearch = clearSearch;\n  CodeMirror.commands.replace = replace;\n\n  CodeMirror.commands.replaceAll = function (cm) {\n    replace(cm, true);\n  };\n});"],"names":["CodeMirror","searchOverlay","query","caseInsensitive","RegExp","replace","global","source","ignoreCase","token","stream","lastIndex","pos","match","exec","string","index","length","skipToEnd","SearchState","this","posFrom","posTo","lastQuery","overlay","getSearchState","cm","state","search","queryCaseInsensitive","toLowerCase","getSearchCursor","caseFold","multiline","persistentDialog","text","deflt","onEnter","onKeyDown","openDialog","value","selectValueOnOpen","closeOnEnter","onClose","clearSearch","bottom","options","dialog","shortText","f","prompt","confirmDialog","fs","openConfirm","confirm","parseString","ch","parseQuery","isRE","indexOf","e","test","startSearch","queryText","removeOverlay","addOverlay","showMatchesOnScrollbar","annotate","clear","doSearch","rev","persistent","immediate","findNext","q","getSelection","hiding","searchNext","event","e_stop","getCursor","style","opacity","shiftKey","_","to","line","document","querySelector","display","wrapper","getBoundingClientRect","cursorCoords","top","getQueryDialog","keyName","extra","getOption","cmd","keyMap","execCommand","operation","callback","cursor","find","Pos","lastLine","firstLine","setSelection","from","scrollIntoView","el","tag","attrs","element","createElement","createDocumentFragment","key","i","arguments","child","appendChild","createTextNode","label","className","phrase","type","id","setAttribute","getReplaceQueryDialog","getReplacementQueryDialog","getDoReplaceConfirm","replaceAll","getRange","all","dialogText","fragment","advance","start","doReplace","defineOption","commands","findPersistent","findPersistentNext","findPersistentPrev","findPrev","mod"],"sourceRoot":""}