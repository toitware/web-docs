{
    "componentChunkName": "component---src-components-layout-mdx-layout-tsx",
    "path": "/language/package/pkgconcepts",
    "result": {"data":{"site":{"siteMetadata":{"title":"Toit documentation"}},"mdx":{"body":"const _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nconst _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return mdx(\"div\", props);\n};\n\nconst Note = makeShortcode(\"Note\");\nconst Tabs = makeShortcode(\"Tabs\");\nconst Tab = makeShortcode(\"Tab\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  let {\n    components\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"concepts-around-packages\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#concepts-around-packages\",\n    \"aria-label\": \"concepts around packages permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Concepts around packages`), mdx(\"p\", null, `This section provides a more detailed description of the concepts that are used in TPM.`), mdx(\"h2\", {\n    \"id\": \"users-of-packages\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#users-of-packages\",\n    \"aria-label\": \"users of packages permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Users of packages`), mdx(\"p\", null, `Code that is not intended to be used by other projects is simply called a \"program\". As of 2023-07-28 they are not supposed to be shared through the package management system. Toit makes it possible to compile programs into executables that can be distributed through platform typical means.`), mdx(\"p\", null, `When a program uses a package, that dependency is registered in the program's yaml file `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` and lock file `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.lock`), `. The latter is where the mapping from `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `prefix`), ` to package is stored. Programs have concrete dependencies. All their dependent packages are resolved to a specific version, not a range of versions. These versions are written in the lock file.`), mdx(\"p\", null, `When a developer calls `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `jag pkg install`), ` or `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `toit.pkg install`), ` they always get the same packages. A team of developers working on the same project will thus work with the exact same versions.`), mdx(\"p\", null, `Both files must be located at the root of the project. Certain commands (like `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `pkg install`), `) automatically create these file if one doesn't exist yet. Be careful, as they are created in the current directory, which might not be the root directory. It is a good idea to initialize a new project with `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `jag pkg init`), ` or `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `toit.pkg init`), ` to create the files in the root directory.`), mdx(Note, {\n    mdxType: \"Note\"\n  }, mdx(\"p\", null, `The `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` and `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.lock`), ` files should be shared with other developers of the program and should therefore be checked into the version control system.`)), mdx(Note, {\n    mdxType: \"Note\"\n  }, mdx(\"p\", null, `A version control checkout of a package may have a `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `tests`), ` subdirectory and/or an\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `examples`), ` directory.  Although they are colocated with the package source they\nshould be thought of as programs, not packages.  Since those directories\ncontain programs they will normally also have `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` and `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.lock`), ` file, which\nspecify the exact versions of other packages that tests and examples run with.`), mdx(\"p\", null, `The package itself is normally accessed from the examples subdirectory\nas a `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#local-package\"\n  }, `local package`), `, using the path `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `..`), `.`)), mdx(\"h2\", {\n    \"id\": \"package\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#package\",\n    \"aria-label\": \"package permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Package`), mdx(\"p\", null, `A package is a folder of Toit code that is intended to be imported by programs and other packages. This code must live in the `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `src`), ` directory of the package.`), mdx(\"p\", null, `With the exception of local packages (see below), packages must be in their own git repository. The URL of the git repository is part of the identity of a package. A package is uniquely identified by the URL together with a version tag.`), mdx(\"p\", null, `If a package has itself dependencies, it declares them in a `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` file. This happens automatically when the author uses a `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `pkg install`), ` command.`), mdx(\"p\", null, `Typically, dependencies are marked with `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `^x.y.z`), ` which is a shorthand for `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `>=x.y.z, <X,0,0`), ` (where `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `x.y.z`), ` is the current version of the dependency, and `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `X`), ` is equal to `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `x + 1`), `). Such a constraint means that the package will work with the current version, or any future version that is compatible (according to semantic versioning).`), mdx(\"p\", null, `Published packages can be discovered by other developers through registries which collect descriptions of known packages (see the `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#registry\"\n  }, `Registry`), ` section).`), mdx(\"h3\", {\n    \"id\": \"local-package\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#local-package\",\n    \"aria-label\": \"local package permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Local package`), mdx(\"p\", null, `TPM supports \"local\" packages where the package is referenced through a path. That path can be absolute or relative.`), mdx(\"p\", null, `This feature is useful for unpublished (versions of) packages. For example, when developing a program and a package, it can be necessary to change the package and program at the same time. Until the package can be published again, one would use a local package.`), mdx(\"p\", null, `For example, if you wanted to use a local version of the `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/toitware/toit-font-clock\"\n  }, `font-clock package`), `\nyou could clone it from Github, then update your your `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` and `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.lock`), ` files with:`), mdx(Tabs, {\n    mdxType: \"Tabs\"\n  }, mdx(Tab, {\n    label: \"Jaguar\",\n    mdxType: \"Tab\"\n  }, mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, `jag pkg remove font_clock\njag pkg install --local --name=font_clock ../../toit-font-clock\n`))), mdx(Tab, {\n    label: \"toitlang.org\",\n    mdxType: \"Tab\"\n  }, mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, `toit.pkg remove font_clock\ntoit.pkg install --local --name=font_clock ../../toit-font-clock\n`)))), mdx(\"p\", null, `This would update your `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.lock`), ` file and change your `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` file from:`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, `dependencies:\n  font_clock:\n    url: github.com/toitware/toit-font-clock\n    version: ^1.2.0\n`)), mdx(\"p\", null, `to`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, `dependencies:\n  font_clock:\n    path: ../../toit-font-clock\n`)), mdx(\"p\", null, `If you edit the `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` file directly, run`), mdx(Tabs, {\n    mdxType: \"Tabs\"\n  }, mdx(Tab, {\n    label: \"Jaguar\",\n    mdxType: \"Tab\"\n  }, mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, `jag pkg install\n`))), mdx(Tab, {\n    label: \"toitlang.org\",\n    mdxType: \"Tab\"\n  }, mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, `toit.pkg install\n`)))), mdx(\"p\", null, `to update the `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.lock`), ` file.`), mdx(\"p\", null, `Another use for local packages with relative paths is for the examples and\ntests subdirectory of version control checkout of a package.  See for an\nexample `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/toitware/toit-morse/blob/main/examples\"\n  }, `the examples directory of the Morse code git repo`), `.\nThe `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.lock`), ` file there specifies only one dependency: The local checkout\nof the Morse code package code in the parent directory, `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `..`), `.`), mdx(Note, {\n    mdxType: \"Note\"\n  }, mdx(\"p\", null, `Only programs and local packages are allowed to depend on other local packages. Once a package is published it can\nonly depend on Git packages.`)), mdx(\"h3\", {\n    \"id\": \"specification---packageyaml\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#specification---packageyaml\",\n    \"aria-label\": \"specification   packageyaml permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Specification - package.yaml`), mdx(\"p\", null, `The specification file, `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), `, provides information about the package. A `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `package.yaml`), ` file may have the following entries:\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `name`), `: The name of the package. This entry is mandatory for packages (but not programs).\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `description`), `: A short description of the package. This entry is mandatory for packages (but not programs).\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `license`), `: The license of the package. Whenever possible, packages should use the same license keywords as provided by `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://spdx.github.io/license-list-data/\"\n  }, `SPDX`), `.\nPackages that are not intended to be reused should use the keyword `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `proprietary`), `. This is generally only useful for private packages.\nIf no `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `license`), ` entry is present, but a `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `LICENSE`), ` file exists, then TPM tries to infer the license by matching the license file.\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `dependencies`), `: The dependencies of this package, together with the prefixes by which they are used inside the code. The dependencies entry is a map from prefix to `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `url`), `, `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `version`), `. For example:`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, `dependencies:\n  prefix1:\n    url: github.com/toitware/example_pkg\n    version: ^1.0.0\n  prefix2:\n    url: github.com/toitware/example_pkg2\n    version: ^3.1.4\n`)), mdx(\"h2\", {\n    \"id\": \"multiple-packages-with-different-versions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#multiple-packages-with-different-versions\",\n    \"aria-label\": \"multiple packages with different versions permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Multiple packages with different versions`), mdx(\"p\", null, `Toit supports multiple versions of the same package as (transitive) dependencies. This is similar in spirit to Go's packaging convention where incompatible packages often change their name by adding the version number to it.\nIn Toit, the name of a package stays the same, but fundamentally Toit treats packages with two different incompatible versions (according to semver) as if they had a different name.`), mdx(\"p\", null, `Advantages:\nEasier to migrate to newer versions of packages, even if some dependencies still need older versions.\nPackages can depend on different versions of themselves. For example version 1.49.3 could import version 3.1.4 and wrap it to make it compatible with the 1.0.0 interface. Bug fixes in newer versions would be much easier to back-port, as it normally just requires changing the dependency of the 1.x.y package.`), mdx(\"p\", null, `Disadvantages:\nPrograms can become bigger. Having two different versions of the same package clearly increases the program's size (unless the two versions are using each other as described above).\nIt can sometimes be confusing why two types are not compatible. Indeed, the type `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `A`), ` of a package with version 1.0.0 is incompatible with type `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `A`), ` of version 2.0.0.`), mdx(\"p\", null, `Supporting multiple versions of packages also has implications on semantic versioning (see below).`), mdx(\"h2\", {\n    \"id\": \"semantic-versioning\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#semantic-versioning\",\n    \"aria-label\": \"semantic versioning permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Semantic versioning`), mdx(\"p\", null, `TPM uses `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://semver.org\"\n  }, `semantic versioning`), ` to determine whether packages are compatible to each other, or not. Roughly speaking, two packages are compatible if their major version is the same.`), mdx(\"p\", null, `Since Toit supports multiple versions of the same package, upgrades don't need to happen uniformly in the whole ecosystem. This makes it easier to upgrade continuously, where older and newer packages co-exist. However, the same feature also requires package authors to be careful when they, themselves, update their dependencies. Specifically, it might be a breaking change to update a dependency if that package's class is exposed.`), mdx(\"p\", null, `Let's have a look at an example of `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `my_pkg`), `, a package with version number `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `1.2.3`), `.`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, `// my_pkg.toit\nimport other_pkg\n\nclass A:\n   my-method -> other-pkg.Class-from-other-pkg:\n    return ...\n`)), mdx(\"p\", null, `In this example the method `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `my-method`), ` (inside package `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `my-pkg`), `) returns an instance of `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `Class-from-other-pkg`), `. One of the dependencies of `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `my-pkg`), ` would thus be the package `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `other-pkg`), `.`), mdx(\"p\", null, `Let's say the current version constraint for `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `other-pkg`), ` is `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `^1.0.0`), ` (allowing any package that is compatible with 1.0.0). Suppose we now update the other package to `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `^2.0.0`), `. Obviously, we need to ensure that our own code still works with the newer version (since the higher major version number indicates potentially breaking changes), but we also need to update the major version of `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `my-pkg`), `!`), mdx(\"p\", null, `Specifically, we need to change our version number from `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `1.2.3`), ` to `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `2.0.0`), `. This is, because users of `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `my-pkg`), ` are now also exposed to the breaking changes of `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `other-pkg`), `. Furthermore, they could have type checks on `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `Class-from-other-pkg`), ` which would need to match the same version.`), mdx(\"h2\", {\n    \"id\": \"registry\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#registry\",\n    \"aria-label\": \"registry permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Registry`), mdx(\"p\", null, `A registry collects descriptions of available packages. Conceptually it's a database of packages. Crucially, it doesn't store the content/sources of packages, but only descriptions of them (see below).`), mdx(\"p\", null, `Most of the time, developers only work with the public `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/toitware/registry\"\n  }, `github.com/toitware/registry`), ` registry. However, TPM supports multiple registries. Companies are free to create their own private registries and use them instead of, or in addition to, the public Toit registry.`), mdx(\"p\", null, `Similar to packages, registries also exist in two variants: Git and local registries. Git registries are added to TPM with a Git-URL, and can be synchronized with `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `jag pkg sync`), ` or `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `toit.pkg sync`), ` (see the `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../pkgguide\"\n  }, `quick start`), ` section for more).`), mdx(\"p\", null, `Local registries are just pointers to a path that contains descriptions.`), mdx(\"h2\", {\n    \"id\": \"description\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#description\",\n    \"aria-label\": \"description permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Description`), mdx(\"p\", null, `Description files are used by TPM to work with packages without needing to download them. As long as the user doesn't need the code of a package, TPM works with descriptions instead. The descriptions are relatively small, and TPM can thus download all of them onto the user's computers. Most operations are then done locally and therefore very fast.`), mdx(\"p\", null, `A description file contains the following information:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `name: The name of a package is mainly for convenience. It is used in the search (together with the description), but is also used as default prefix for the package.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `description: A small description of the package.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `license: The license of the package. For many projects it is important that transitive dependencies are all licensed under acceptable terms. Having the license field in the description makes it possible to weed out packages that aren't acceptable before even downloading them.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `url: The Git location of the package. Together with the version this identifies the package.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `version: The version of the package. TPM uses this entry to find the corresponding tag.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `hash: the Git hash of the package.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `dependencies: the list of dependencies for this package.`)));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#concepts-around-packages","title":"Concepts around packages","items":[{"url":"#users-of-packages","title":"Users of packages"},{"url":"#package","title":"Package","items":[{"url":"#local-package","title":"Local package"},{"url":"#specification---packageyaml","title":"Specification - package.yaml"}]},{"url":"#multiple-packages-with-different-versions","title":"Multiple packages with different versions"},{"url":"#semantic-versioning","title":"Semantic versioning"},{"url":"#registry","title":"Registry"},{"url":"#description","title":"Description"}]}]}}},"pageContext":{"title":"Concepts around packages","id":"e3afa583-75ab-5e95-b8ac-4b5a555ae7de"}},
    "staticQueryHashes": ["2197327828"]}