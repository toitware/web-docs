{
    "componentChunkName": "component---src-components-layout-mdx-layout-tsx",
    "path": "/tutorials/containers/toit-sdk",
    "result": {"data":{"site":{"siteMetadata":{"title":"Toit documentation"}},"mdx":{"body":"const _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nconst _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return mdx(\"div\", props);\n};\n\nconst Note = makeShortcode(\"Note\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  let {\n    components\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"manage-containers-with-the-toit-sdk\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#manage-containers-with-the-toit-sdk\",\n    \"aria-label\": \"manage containers with the toit sdk permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Manage containers with the Toit SDK`), mdx(\"p\", null, `In this tutorial we will create a container and bundle it\nwith a firmware envelope. We will then flash the envelope to a device.`), mdx(\"h2\", {\n    \"id\": \"prerequisites\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#prerequisites\",\n    \"aria-label\": \"prerequisites permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Prerequisites`), mdx(\"p\", null, `This tutorial requires the Toit SDK. It can be installed on\nArchlinux with `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `yay -S toit`), ` (in which case the SDK can be found in\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `/opt/toit-sdk`), `). Alternatively, the SDK can be downloaded from the\n`, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/toitlang/toit/releases\"\n  }, `Toit releases page`), `, or\n`, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/toitlang/toit\"\n  }, `build from source`), `. When building\nlocally, the SDK is located at `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `build/host/sdk`), `.`), mdx(\"p\", null, `This tutorial assumes that Toit's firmware tool is\navailable as `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `firmware`), `. This tool can be found in the SDK\nat `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `$SDK/tools/firmware`), `.`), mdx(\"p\", null, `It also assumes that a Toit firmware envelope is available as\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `firmware.envelope`), `. In a local build it is located at\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `build/esp32/firmware.envelope`), `. Each Toit release also has\na corresponding firmware envelope available for download\n(for example `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `firmware-esp32.gz`), `).`), mdx(\"p\", null, `Finally, it assumes that the Toit compiler is available as `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `toit.compile`), `.\nThis tool can be found in the SDK at `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `$SDK/bin/toit.compile`), `.`), mdx(\"h2\", {\n    \"id\": \"instructions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#instructions\",\n    \"aria-label\": \"instructions permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Instructions`), mdx(\"p\", null, `Start by building a snapshot of the program you want to install.`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, `toit.compile -w hello.snapshot hello.toit\n`)), mdx(\"p\", null, `Then add the snapshot to a firmware envelope.`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, `# By using '-o' we don't modify the envelope but create a new one.\nfirmware -e firmware.envelope container install -o hello.envelope hello hello.snapshot\n`)), mdx(\"p\", null, `The created envelope can be flashed to a device using the `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `flash`), ` command.`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, `firmware -e hello.envelope flash --port /dev/ttyUSB0 --baud 921600\n`)), mdx(\"p\", null, `When the device boots up, it will run the installed container.`), mdx(\"p\", null, `If you want to install the container, but not run it at boot, you can use the\n`, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `--trigger none`), ` flag when installing the container. You will then need\nto start the `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#starting-containers\"\n  }, `container manually`), `.`), mdx(\"h2\", {\n    \"id\": \"library\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#library\",\n    \"aria-label\": \"library permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Library`), mdx(\"p\", null, `The `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `system.containers`), ` library provides a way to list, and start\ncontainers.`), mdx(\"h3\", {\n    \"id\": \"listing-containers\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#listing-containers\",\n    \"aria-label\": \"listing containers permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Listing containers`), mdx(\"p\", null, `Here is an example of how to list the installed containers.`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-toit\"\n  }, `import system.containers\n\nmain:\n  images := containers.images\n  images.do: | image/containers.ContainerImage |\n    print \"$image.id - $image.name\"\n`)), mdx(Note, {\n    mdxType: \"Note\"\n  }, mdx(\"p\", null, `You can also run this program with Jaguar. In that case you should\nsee the \"Jaguar\" container, and then an unnamed container. The\nunnamed container is this program that is temporarily installed\nwhen calling `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `jag run`), ` or `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `jag watch`), `.`), mdx(\"p\", null, `Also note that Jaguar doesn't set names when installing containers.`)), mdx(\"h3\", {\n    \"id\": \"starting-containers\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#starting-containers\",\n    \"aria-label\": \"starting containers permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Starting containers`), mdx(\"p\", null, `As a next step we can start other containers with `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `start`), `.`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-toit\"\n  }, `import system.containers\n\nmain:\n  images := containers.images\n  current-id := containers.current\n  images.do: | image/containers.ContainerImage |\n    print \"$image.id - $image.name\"\n    if image.name != \"jaguar\" and image.id != current-id:\n      print \"Starting\"\n      container := containers.start image.id\n      status := container.wait\n      print \"Container exited with status $status\"\n`)), mdx(\"p\", null, `Here we start all containers except the Jaguar container, and the\ncontainer that is currently running. We then wait for the container\nto exit, and print the exit status.`));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#manage-containers-with-the-toit-sdk","title":"Manage containers with the Toit SDK","items":[{"url":"#prerequisites","title":"Prerequisites"},{"url":"#instructions","title":"Instructions"},{"url":"#library","title":"Library","items":[{"url":"#listing-containers","title":"Listing containers"},{"url":"#starting-containers","title":"Starting containers"}]}]}]}}},"pageContext":{"title":"Manage containers with the Toit SDK","id":"73bb805f-f256-5c30-964c-e5858f247764"}},
    "staticQueryHashes": ["2197327828"]}