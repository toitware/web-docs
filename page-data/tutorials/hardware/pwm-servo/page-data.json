{
    "componentChunkName": "component---src-components-layout-mdx-layout-tsx",
    "path": "/tutorials/hardware/pwm-servo",
    "result": {"data":{"site":{"siteMetadata":{"title":"Toit documentation"}},"mdx":{"body":"const _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nconst _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  let {\n    components\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"servo-motor\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#servo-motor\",\n    \"aria-label\": \"servo motor permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Servo motor`), mdx(\"p\", null, `In this tutorial we are going to use a servo motor. Servo motors are\ncommonly used in robotics. They are mass produced and can\nbe obtained cheaply. In contrast to \"normal\" motors, a servo motor is\ndesigned to turn its shaft to a specific angle, depending on the signal\nit gets.`), mdx(\"h2\", {\n    \"id\": \"prerequisites\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#prerequisites\",\n    \"aria-label\": \"prerequisites permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Prerequisites`), mdx(\"p\", null, `We assume that you have a basic understanding of how pulse width modulation\n(henceforth \"PWM\") works, and how it is used in Toit. If necessary, have\na look at the `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../pwm_led\"\n  }, `Fading LED tutorial`), ` first.`), mdx(\"h2\", {\n    \"id\": \"setup\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#setup\",\n    \"aria-label\": \"setup permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Setup`), mdx(\"p\", null, `Connect the servo as follows:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Connect the red wire to 3.3V.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Connect the black (or brown) wire to GND.`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Connect the yellow (or orange) wire to pin 12.`)), mdx(\"img\", {\n    src: ServoDiagram,\n    alt: \"Servo motor diagram\"\n  }), mdx(\"img\", {\n    src: ServoSchematics,\n    alt: \"Servo motor schematics\"\n  }), mdx(\"h2\", {\n    \"id\": \"codeslee\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#codeslee\",\n    \"aria-label\": \"codeslee permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Code/slee`), mdx(\"p\", null, `A servo motor is controlled by a PWM signal. The duty cycle of the PWM signal\ndetermines the angle of the servo motor. The frequency of the PWM signal is\nusually 50Hz, but the actual frequency depends on the motor.`), mdx(\"p\", null, `Similarly to the `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../pwm/led\"\n  }, `fading LED example`), ` we just need to create a\nPWM generator and then hook pin 12 to it. This time the frequency of the\nwave should be 50Hz.`), mdx(\"p\", null, `Write the following `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `servo.toit`), ` program and run or watch it:`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-toit\"\n  }, `import gpio\nimport gpio.pwm\n\nmain:\n  servo := gpio.Pin 12\n  generator := pwm.Pwm --frequency=50\n\n  // Start with the half-way angle.\n  channel := generator.start servo --duty-factor=0.075\n  sleep --ms=1500\n\n  // Max angle.\n  channel.set-duty-factor 0.125\n  sleep --ms=1500\n\n  // Min angle.\n  channel.set-duty-factor 0.025\n  sleep --ms=1500\n`)), mdx(\"p\", null, `Servo motors only have a limited range in which they should operate: the maximum\nduty factor is 0.125, and the minimum is 0.025.`), mdx(\"p\", null, `If the motor is operated out of the recommended range it may use significantly\nmore power, trying to reach the desired angle. However, the 3.3V supply is\nlimited, and eventually the 5V-to-3.3V converter\n(converting USB 5V to the 3.3V that are needed by the ESP32) can't deliver\nanymore. At that point the voltage drops and the ESP32 detects a\n`, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Brownout_(electricity)\"\n  }, `brownout`), `, and shuts down.`), mdx(\"p\", null, `This can be seen when running `, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, `toit monitor`), `:`), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, `entry 0x400805c8\nclearing RTC memory: powered on by hardware source\n[flash reg] address 0x3f430000, size 0x00200000\n[jaguar] INFO: program 1 re-starting from flash @ [442368,466944]\n\nBrownout detector was triggered\n`)), mdx(\"p\", null, `For programs that are installed (see\n`, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../../containers\"\n  }, `container install`), `) this can be\nan issue if the servo draws too much power before Jaguar is able to update\nthe program. In that case, one has to unplug the servo to get back into a\nstate where Jaguar is able to install a corrected program.`), mdx(\"h2\", {\n    \"id\": \"exercises\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#exercises\",\n    \"aria-label\": \"exercises permalink\",\n    \"className\": \"table-of-contents-icon before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), `Exercises`), mdx(\"p\", null, `Be careful not to run with frequencies that aren't supported by the\nservo. Furthermore keep the angle in a range that is supported by the\nservo. Otherwise the motor could draw too much power leading to an\nunstable system. Unless the system is stressed for a long period of\ntime, there should not be any permanent damage. This assumes that\nthe connections were made correctly.`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Use the servo as an actuator for a button (for example the space bar of\na keyboard).`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Use the servo as a gauge showing different values.`)));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#servo-motor","title":"Servo motor","items":[{"url":"#prerequisites","title":"Prerequisites"},{"url":"#setup","title":"Setup"},{"url":"#codeslee","title":"Code/slee"},{"url":"#exercises","title":"Exercises"}]}]}}},"pageContext":{"title":"Servo motor","id":"8d6c35ea-725f-5a64-ab62-5a654dc2f8dd"}},
    "staticQueryHashes": ["2197327828"]}